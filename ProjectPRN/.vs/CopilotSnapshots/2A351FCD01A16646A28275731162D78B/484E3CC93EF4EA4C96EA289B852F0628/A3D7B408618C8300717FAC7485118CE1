using BusinessObjects.Models;
using Microsoft.EntityFrameworkCore;

namespace DataAccessObjects;

public interface IInstructorDAO : IGenericDAO<Instructor>
{
    Instructor? GetByPhoneNumber(string phoneNumber);
}

public class InstructorDAO : IInstructorDAO
{
    private readonly Prn212skillsHoannn6Context _context;

    public InstructorDAO()
    {
        _context = new Prn212skillsHoannn6Context();
    }

    public IEnumerable<Instructor> GetAll()
    {
        return _context.Instructors.Include(i => i.LifeSkillCourses).ToList();
    }

    public Instructor? GetById(int id)
    {
        return _context.Instructors.Include(i => i.LifeSkillCourses).FirstOrDefault(i => i.InstructorId == id);
    }

    public Instructor? GetByPhoneNumber(string phoneNumber)
    {
        return _context.Instructors.FirstOrDefault(i => i.PhoneNumber == phoneNumber);
    }

    public void Add(Instructor entity)
    {
        _context.Instructors.Add(entity);
    }

    public void Update(Instructor entity)
    {
        _context.Instructors.Update(entity);
    }

    public void Delete(Instructor entity)
    {
        _context.Instructors.Remove(entity);
    }

    public void SaveChanges()
    {
        _context.SaveChanges();
    }
}