<Window x:Class="ProjectPRN.Admin.StudentProgressManagement.StudentProgressDetailView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Chi Tiết Tiến Trình Học Sinh" 
        Height="600" Width="1000"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{DynamicResource PrimaryHueMidBrush}" Padding="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock x:Name="txtStudentName" Text="Chi Tiết Tiến Trình Học Sinh" 
                              Style="{DynamicResource MaterialDesignHeadline5TextBlock}"
                              Foreground="White"/>
                    <TextBlock x:Name="txtStudentInfo" Text="Thông tin học sinh" 
                              Foreground="White" Margin="0,5,0,0"/>
                </StackPanel>
                
                <Button Grid.Column="1" Content="Đóng" 
                        Style="{DynamicResource MaterialDesignFlatButton}"
                        Foreground="White" Click="BtnClose_Click"/>
            </Grid>
        </Border>

        <!-- Student Summary -->
        <Border Grid.Row="1" Background="White" Padding="20" BorderBrush="#E0E0E0" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <TextBlock Text="Tổng khóa học" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="txtTotalCourses" Text="0" 
                              Style="{DynamicResource MaterialDesignHeadline4TextBlock}"
                              HorizontalAlignment="Center" Foreground="#2196F3"/>
                </StackPanel>

                <StackPanel Grid.Column="1">
                    <TextBlock Text="Đã hoàn thành" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="txtCompletedCourses" Text="0" 
                              Style="{DynamicResource MaterialDesignHeadline4TextBlock}"
                              HorizontalAlignment="Center" Foreground="#4CAF50"/>
                </StackPanel>

                <StackPanel Grid.Column="2">
                    <TextBlock Text="Đang học" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="txtInProgressCourses" Text="0" 
                              Style="{DynamicResource MaterialDesignHeadline4TextBlock}"
                              HorizontalAlignment="Center" Foreground="#FF9800"/>
                </StackPanel>

                <StackPanel Grid.Column="3">
                    <TextBlock Text="Tiến độ tổng" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="txtOverallProgress" Text="0%" 
                              Style="{DynamicResource MaterialDesignHeadline4TextBlock}"
                              HorizontalAlignment="Center" Foreground="#9C27B0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Course Progress List -->
        <DataGrid x:Name="dgCourseProgress" Grid.Row="2" 
                  AutoGenerateColumns="False" 
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  SelectionMode="Single"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="All"
                  Margin="20">
            
            <DataGrid.Columns>
                <DataGridTextColumn Header="Tên khóa học" Binding="{Binding CourseName}" Width="250" IsReadOnly="True"/>
                <DataGridTextColumn Header="Giảng viên" Binding="{Binding InstructorName}" Width="150" IsReadOnly="True"/>
                <DataGridTextColumn Header="Tổng bài tập" Binding="{Binding TotalAssessments}" Width="100" IsReadOnly="True"/>
                <DataGridTextColumn Header="Đã hoàn thành" Binding="{Binding CompletedAssessments}" Width="100" IsReadOnly="True"/>
                <DataGridTextColumn Header="Tiến độ (%)" Binding="{Binding ProgressPercentageText}" Width="100" IsReadOnly="True"/>
                <DataGridTextColumn Header="Trạng thái" Binding="{Binding StatusText}" Width="120" IsReadOnly="True"/>
                <DataGridTextColumn Header="Ngày hoàn thành" Binding="{Binding CompletionDateText}" Width="120" IsReadOnly="True"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Status Bar -->
        <Border Grid.Row="3" Background="#F5F5F5" Padding="20,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock x:Name="txtStatus" Grid.Column="0" 
                          Text="Sẵn sàng" VerticalAlignment="Center"/>
                
                <TextBlock x:Name="txtLastUpdated" Grid.Column="1" 
                          Text="Cập nhật: --/--/---- --:--:--" VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <!-- Loading Overlay -->
        <Border x:Name="LoadingOverlay" Grid.RowSpan="4" 
                Background="#80000000" Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressBar Style="{DynamicResource MaterialDesignCircularProgressBar}"
                            Value="0" IsIndeterminate="True" Width="50" Height="50"/>
                <TextBlock Text="Đang tải dữ liệu..." Foreground="White" 
                          HorizontalAlignment="Center" Margin="0,10,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>